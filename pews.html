<!DOCTYPE html>
<html lang="ko" dir="ltr">

<head>
	<meta charset="UTF-8">
	<meta name="viewport"
		content="width=device-width, initial-scale=1.0 userscaleable=no, minimum-scale=1.0,maximum-scale=1.0, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>사용자 맞춤형 지진정보서비스 - 기상청</title>
	<link rel="stylesheet" href="https://www.weather.go.kr/pews/css/common.css">
	<link rel="stylesheet" href="https://www.weather.go.kr/pews/css/phase.css">
</head>
<style>
	body {
		overflow: hidden !important;
	}
</style>
<script>
	var ra = ["서울", "부산", "대구", "인천", "광주", "대전", "울산", "세종", "경기", "강원", "충북", "충남", "전북", "전남", "경북", "경남", "제주"];
	var ca = [11110, 11140, 11170, 11200, 11215, 11230, 11260, 11290, 11305, 11320, 11350, 11380, 11410, 11440, 11470, 11500, 11530, 11545, 11560, 11590, 11620, 11650, 11680, 11710, 11740, 26110, 26140, 26170, 26200, 26230, 26260, 26290, 26320, 26350, 26380, 26410, 26440, 26470, 26500, 26530, 26710, 27110, 27140, 27170, 27200, 27230, 27260, 27290, 27710, 28110, 28140, 28177, 28185, 28200, 28237, 28245, 28260, 28710, 28720, 29110, 29140, 29155, 29170, 29200, 30110, 30140, 30170, 30200, 30230, 31110, 31140, 31170, 31200, 31710, 36110, 41111, 41113, 41115, 41117, 41131, 41133, 41135, 41150, 41171, 41173, 41190, 41210, 41220, 41250, 41271, 41273, 41281, 41285, 41287, 41290, 41310, 41360, 41370, 41390, 41410, 41430, 41450, 41461, 41463, 41465, 41480, 41500, 41550, 41570, 41590, 41610, 41630, 41650, 41670, 41800, 41820, 41830, 42110, 42130, 42150, 42170, 42190, 42210, 42230, 42720, 42730, 42750, 42760, 42770, 42780, 42790, 42800, 42810, 42820, 42830, 43111, 43112, 43113, 43114, 43130, 43150, 43720, 43730, 43740, 43745, 43750, 43760, 43770, 43800, 44131, 44133, 44150, 44180, 44200, 44210, 44230, 44250, 44270, 44710, 44760, 44770, 44790, 44800, 44810, 44825, 45111, 45113, 45130, 45140, 45180, 45190, 45210, 45710, 45720, 45730, 45740, 45750, 45770, 45790, 45800, 46110, 46130, 46150, 46170, 46230, 46710, 46720, 46730, 46770, 46780, 46790, 46800, 46810, 46820, 46830, 46840, 46860, 46870, 46880, 46890, 46900, 46910, 47111, 47113, 47130, 47150, 47170, 47190, 47210, 47230, 47250, 47280, 47290, 47720, 47730, 47750, 47760, 47770, 47820, 47830, 47840, 47850, 47900, 47920, 47930, 47940, 48121, 48123, 48125, 48127, 48129, 48170, 48220, 48240, 48250, 48270, 48310, 48330, 48720, 48730, 48740, 48820, 48840, 48850, 48860, 48870, 48880, 48890, 50110, 50130];
	var da = ["서울,종로구,37.573172,126.97922,3975", "서울,중구,37.56376,126.997459,3975", "서울,용산구,37.532612,126.990182,4126", "서울,성동구,37.563386,127.037047,3976", "서울,광진구,37.53821,127.082191,4128", "서울,동대문구,37.574428,127.039712,3976", "서울,중랑구,37.606736,127.092924,3826", "서울,성북구,37.58944,127.016817,3976", "서울,강북구,37.639745,127.025547,3825", "서울,도봉구,37.668639,127.047364,3674", "서울,노원구,37.654375,127.056318,3675", "서울,은평구,37.602766,126.928839,3823", "서울,서대문구,37.579213,126.936773,3974", "서울,마포구,37.566404,126.901763,3974,", "서울,양천구,37.517019,126.866538,4124", "서울,강서구,37.550968,126.849614,3972", "서울,구로구,37.49565,126.887771,4275", "서울,금천구,37.456979,126.895656,4275", "서울,영등포구,37.52641,126.896252,4124", "서울,동작구,37.512462,126.939485,4125", "서울,관악구,37.478449,126.951758,4127", "서울,서초구,37.48378,127.032733,4278", "서울,강남구,37.517336,127.047367,4127", "서울,송파구,37.514741,127.106052,4129", "서울,강동구,37.53012,127.123858,4129", "부산,중구,35.106333,129.032372,11415", "부산,서구,35.097689,129.023906,11566", "부산,동구,35.129298,129.045302,11415", "부산,영도구,35.091224,129.067945,11567", "부산,부산진구,35.162943,129.053097,11265", "부산,동래구,35.205011,129.083632,11265", "부산,남구,35.136318,129.084477,11416", "부산,북구,35.197266,128.990201,11263", "부산,해운대구,35.163096,129.1635,11267", "부산,사하구,35.104503,128.974786,11414", "부산,금정구,35.243036,129.092125,11114", "부산,강서구,35.212155,128.980552,10961", "부산,연제구,35.176273,129.079814,11265", "부산,수영구,35.145568,129.113132,11417", "부산,사상구,35.152585,128.991196,11263", "부산,기장군,35.244476,129.222421,11117", "대구,중구,35.869305,128.606199,9142", "대구,동구,35.886576,128.635483,9142", "대구,서구,35.871814,128.559166,9141", "대구,남구,35.845968,128.597675,9292", "대구,북구,35.885726,128.582811,9141", "대구,수성구,35.85821,128.630739,9142", "대구,달서구,35.829905,128.532806,9291", "대구,달성군,35.774645,128.431478,9440", "인천,중구,37.473715,126.621529,4270", "인천,동구,37.473831,126.643266,4270", "인천,미추홀구,37.463598,126.650573,4271", "인천,연수구,37.410183,126.678313,4422", "인천,남동구,37.447358,126.731623,4423", "인천,부평구,37.506989,126.721668,4121", "인천,계양구,37.537102,126.737663,4121", "인천,서구,37.545374,126.675987,4120", "인천,강화군,37.74745,126.487365,3512", "인천,옹진군,37.446609,126.636785,4421", "광주,동구,35.146085,126.923103,11373", "광주,서구,35.151601,126.890072,12221", "광주,남구,35.132829,126.902408,11373", "광주,북구,35.174128,126.912084,11222", "광주,광산구,35.139557,126.793672,11370", "대전,동구,36.311886,127.454818,7760", "대전,중구,36.325734,127.421365,7759", "대전,서구,36.355413,127.383686,7607", "대전,유성구,36.362289,127.356253,7607", "대전,대덕구,36.346732,127.415617,7759", "울산,중구,35.569376,129.332543,10062", "울산,남구,35.543797,129.330113,10213", "울산,동구,35.504813,129.416623,10215", "울산,북구,35.582601,129.361283,10063", "울산,울주군,35.52247,129.242209,10211", "세종,세종시,36.592892,127.292362,7001", "경기,수원시 장안구,37.303493,127.009678,4731", "경기,수원시 권선구,37.25761,126.971702,4881", "경기,수원시 팔달구,37.286534,127.035816,4882", "경기,수원시 영통구,37.259508,127.046588,4882", "경기,성남시 수정구,37.450292,127.145529,4280", "경기,성남시 중원구,37.430641,127.137109,4431", "경기,성남시 분당구,37.38275,127.118913,4583", "경기,의정부시,37.738061,127.033893,3523", "경기,안양시 만안구,37.386584,126.93234,4578", "경기,안양시 동안구,37.392511,126.951274,4579", "경기,부천시,37.503486,126.766046,4122", "경기,광명시,37.478545,126.864711,4275", "경기,평택시,36.992283,127.112653,5790", "경기,동두천시,37.903591,127.060388,2920", "경기,안산시 상록구,37.300841,126.846205,4727", "경기,안산시 단원구,37.31959,126.812365,4727", "경기,고양시 덕양구,37.637468,126.832374,3821", "경기,고양시 일산동구,37.65895,126.774759,3669", "경기,고양시 일산서구,37.675203,126.750664,3673", "경기,과천시,37.429194,126.987607,4428", "경기,구리시,37.594326,127.129606,3978", "경기,남양주시,37.635977,127.216385,3829", "경기,오산시,37.149891,127.077494,5336", "경기,시흥시,37.380063,126.802797,4576", "경기,군포시,37.361622,126.935121,4578", "경기,의왕시,37.344823,126.968291,4730", "경기,하남시,37.539257,127.214853,4131", "경기,용인시 처인구,37.234494,127.201367,5037", "경기,용인시 기흥구,37.280446,127.114683,4884", "경기,용인시 수지구,37.322149,127.098082,4732", "경기,파주시,37.760141,126.779958,3367", "경기,이천시,37.272181,127.434993,4890", "경기,안성시,37.008031,127.279768,5640", "경기,김포시,37.615271,126.715648,3819", "경기,화성시,37.199541,126.831438,5180", "경기,광주시,37.429462,127.255175,4434", "경기,양주시,37.785227,127.045835,3372", "경기,포천시,37.894985,127.200368,3074", "경기,여주시,37.298249,127.63721,4894", "경기,연천군,38.096677,127.074874,2467", "경기,가평군,37.831328,127.509551,3231", "경기,양평군,37.491692,127.487591,4287", "강원,춘천시,37.881272,127.730144,3084", "강원,원주시,37.341707,127.919787,4749", "강원,강릉시,37.752109,128.875899,3409", "강원,동해시,37.524697,129.114375,4169", "강원,태백시,37.164087,128.985759,5223", "강원,속초시,38.207089,128.591917,2044", "강원,삼척시,37.449935,129.165151,4472", "강원,홍천군,37.696825,127.888675,3691", "강원,횡성군,37.491874,127.984878,4297", "강원,영월군,37.18368,128.461571,5213", "강원,평창군,37.370755,128.390208,4607", "강원,정선군,37.380645,128.660812,4613", "강원,철원군,38.146758,127.313358,2321", "강원,화천군,38.106092,127.708213,2329", "강원,양구군,38.109959,127.989951,2334", "강원,인제군,38.06976,128.170429,2489", "강원,고성군,38.380542,128.467781,1589", "강원,양양군,38.07539,128.618847,2498", "충북,청주시 상당구,36.634684,127.48847,6854", "충북,청주시 서원구,36.637684,127.469708,6854", "충북,청주시 흥덕구,36.641489,127.431134,6853", "충북,청주시 청원구,36.651447,127.486648,6703", "충북,충주시,36.99108,127.925919,5806", "충북,제천시,37.132628,128.190905,5358", "충북,보은군,36.489468,127.729504,7312", "충북,옥천군,36.306664,127.571294,7762", "충북,영동군,36.175011,127.783425,8219", "충북,증평군,36.785403,127.581673,6403", "충북,진천군,36.85537,127.435452,6098", "충북,괴산군,36.815281,127.786601,6256", "충북,음성군,36.940288,127.690467,5952", "충북,단양군,36.984664,128.365783,5815", "충남,천안시 동남구,36.806985,127.150333,6244", "충남,천안시 서북구,36.878428,127.155173,6093", "충남,공주시,36.446589,127.119019,7451", "충남,보령시,36.333459,126.6128,7743", "충남,아산시,36.790076,127.002443,6392", "충남,서산시,36.784965,126.450294,6381", "충남,논산시,36.187163,127.098742,8205", "충남,계룡시,36.274529,127.248676,7906", "충남,당진시,36.889545,126.645567,6082", "충남,금산군,36.108805,127.487902,8364", "충남,부여군,36.275777,126.909812,7900", "충남,서천군,36.080231,126.691313,8650", "충남,청양군,36.459188,126.802258,7294", "충남,홍성군,36.601357,126.660838,6838", "충남,예산군,36.682731,126.84878,6690", "충남,태안군,36.745739,126.297886,6528", "전북,전주시 완산구,35.81218,127.119796,9263", "전북,전주시 덕진구,35.829393,127.134326,9263", "전북,군산시,35.967613,126.7368,8802", "전북,익산시,35.948284,126.95759,8958", "전북,정읍시,35.569845,126.856126,10013", "전북,남원시,35.416414,127.390423,10476", "전북,김제시,35.803591,126.880311,9258", "전북,완주군,35.904737,127.161622,8962", "전북,진안군,35.79197,127.424684,9420", "전북,무주군,36.007103,127.660755,8670", "전북,장수군,35.647385,127.521143,9875", "전북,임실군,35.618216,127.289172,9870", "전북,순창군,35.374285,127.13765,10622", "전북,고창군,35.435781,126.701957,10463", "전북,부안군,35.731725,126.733384,9557", "전남,목포시,34.81191,126.392404,12268", "전남,여수시,34.760444,127.662231,12445", "전남,순천시,34.950612,127.487359,11837", "전남,나주시,35.015837,126.710809,11671", "전남,광양시,34.940676,127.695966,11992", "전남,담양군,35.32118,126.988104,10770", "전남,곡성군,35.282012,127.292012,10927", "전남,구례군,35.202566,127.462817,11082", "전남,고흥군,34.611232,127.285008,12890", "전남,보성군,34.7715,127.080005,12433", "전남,화순군,35.064587,126.986489,11525", "전남,장흥군,34.681737,126.907008,12732", "전남,강진군,34.642083,126.767142,12880", "전남,해남군,34.573464,126.599183,13027", "전남,영암군,34.800101,126.696823,12274", "전남,무안군,34.990455,126.481667,11817", "전남,함평군,35.065906,126.516536,11516", "전남,영광군,35.277195,126.512012,10912", "전남,장성군,35.301822,126.784836,10766", "전남,완도군,34.31104,126.754902,13786", "전남,진도군,34.486954,126.263558,13323", "전남,신안군,34.833436,126.351473,12268", "경북,포항시 남구,36.00865,129.35933,8704", "경북,포항시 북구,36.041824,129.365649,8704", "경북,경주시,35.83754367,129.2144188,9305", "경북,김천시,36.139822,128.113657,8377", "경북,안동시,36.568409,128.72962,7030", "경북,구미시,36.119552,128.344499,8381", "경북,영주시,36.805671,128.623988,6273", "경북,영천시,35.973241,128.938597,8846", "경북,상주시,36.410953,128.159142,7472", "경북,문경시,36.586528,128.186769,7019", "경북,경산시,35.825078,128.741271,9295", "경북,군위군,36.242981,128.572901,8084", "경북,의성군,36.352724,128.697164,7633", "경북,청송군,36.436256,129.057101,7490", "경북,영양군,36.666725,129.112395,6736", "경북,영덕군,36.415069,129.366078,7496", "경북,청도군,35.647469,128.734127,9899", "경북,고령군,35.726098,128.262812,9588", "경북,성주군,35.919119,128.282962,8984", "경북,칠곡군,35.995518,128.401567,8836", "경북,예천군,36.657704,128.45292,6723", "경북,봉화군,36.893149,128.732665,6124", "경북,울진군,36.993068,129.400533,5836", "경북,울릉군,37.484426,130.90586,4356", "경남,창원시 의창구,35.254005,128.640122,10954", "경남,창원시 성산구,35.198465,128.702644,11258", "경남,창원시 마산합포구,35.196928,128.567867,11255", "경남,창원시 마산회원구,35.220822,128.579677,11104", "경남,창원시 진해구,35.133204,128.710181,11409", "경남,진주시,35.180119,128.107529,11246", "경남,통영시,34.854366,128.433081,12158", "경남,사천시,35.003466,128.064242,11698", "경남,김해시,35.228588,128.889428,11110", "경남,밀양시,35.503816,128.746619,10201", "경남,거제시,34.880459,128.621121,12162", "경남,양산시,35.335043,129.037407,10811", "경남,의령군,35.32221,128.261686,10796", "경남,함안군,35.272494,128.406464,10950", "경남,창녕군,35.544566,128.492246,10196", "경남,고성군,34.973037,128.32225,11854", "경남,남해군,34.837348,127.892289,12298", "경남,하동군,35.067313,127.751317,11541", "경남,산청군,35.415678,127.873467,10486", "경남,함양군,35.520371,127.725153,10181", "경남,거창군,35.686719,127.909566,9732", "경남,합천군,35.566621,128.165806,10039", "제주,제주시,33.499562,126.531164,16348", "제주,서귀포시,33.254083,126.56010,16953"];
	var mag = ["", "진도 Ⅰ : 대부분 사람들은 느낄 수 없으나, 지진계에는 기록된다.", "진도 Ⅱ : 조용한 상태나 건물 위층에 있는 소수의 사람만 느낀다.", "진도 Ⅲ : 실내, 특히 건물 위층에 있는 사람이 현저하게 느끼며, 정지하고 있는 차가 약간 흔들린다.", "진도 Ⅳ : 실내에서 많은 사람이 느끼고, 일부가 잠에서 깨며, 그릇, 창문 등이 흔들린다.", "진도 Ⅴ : 거의 모든 사람이 진동을 느끼고, 그릇, 창문 등이 깨지기도 하며, 불안정한 물체는 넘어진다.", "진도 Ⅵ : 모든 사람이 느끼고, 일부 무거운 가구가 움직이며, 벽의 석회가 떨어지기도 한다.", "진도 Ⅶ : 일반 건물에 약간의 피해가 발생하며, 부실한 건물에는 상당한 피해가 발생한다.", "진도 Ⅷ : 일반 건물에 부분적 붕괴 등 상당한 피해가 발생하며, 부실한 건물에는 심각한 피해가 발생한다.", "진도 Ⅸ : 잘 설계된 건물에도 상당한 피해가 발생하며, 일반 건축물에는 붕괴 등 큰 피해가 발생한다.", "진도 Ⅹ : 대부분의 석조 및 골조 건물이 파괴되고, 기차 선로가 휘어진다."];
	var mmi = ["", "Ⅰ", "Ⅱ", "Ⅲ", "Ⅳ", "Ⅴ", "Ⅵ", "Ⅶ", "Ⅷ", "Ⅸ", "Ⅹ&plus;"];
	// var mmiColor = ["#FFFFFF", "#FFFFFF", "#A0E6FF", "#92D050", "#FFFF00", "#FFC000", "#FF0000", "#A32777", "#632523", "#4C2600", "#000000"];
	var mmiColor = ["#FFFFFF", "#FFFFFF", "#A0E6FF", "#92D050", "#FFFF00", "#FFC000", "#FF0000", "#A32777", "#632523", "#4C2600", "#000000", "#000000", "#DFDFDF", "#BFBFBF", "#9F9F9F"];

	var eqkHist;

	var tmp = true;
	var noticeDelay = 0;
	var speed = 3;
	var timeZone = 9;
	var tzMsec = timeZone * 3600000;
	var clock;
	var frameRate = 10;
	var dateFormat = "yyyy.MM.dd. HH:mm:ss";
	var tick = 0;
	var mmiObject;
	var originLat = 37.51;
	var originLon = 126.94;
	var originY = fn_parseY(originLat);
	var originX = fn_parseX(originLon);
	var imgW = 848;
	var myLoc = [];
	var curLocSel = 0;
	var eta = 0;
	var showMyLoc = true;

	var alarmReg = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];
	var ararm = true;
	var renewEqk = false;
	var phase = 1;
	var latestEqkTime = 0;
	var eqkTime = 0;
	var eqkMag = 0;
	var eqkDep = 0;
	var eqkStr = "";
	var eqkInfoStr = "";
	var eqkTimeStr = "";
	var eqkMax = 1;
	var eqkMaxArea = [];
	var maxEqkInfoLen = 120;
	var maxEqkStrLen = 60;
	var latEvtId = "0";

	var headerLen = 4;
	var staList = [];
	var staLen = 0;

	var delay = 1000; // 요기
	var tide = delay; // 요기
	var syncPeriod = 10000; // 요기
	var bSync = true;
	var sim = false;
	var draw = true;
	var his = false;

	var show = false;
	var showOrg = false;
	var simX;
	var simY;
	var eqkId = "";
	var gridRenew = true;
	var gridArr = [];
	var rtCnt = 0;

	var binPath = "https://www.weather.go.kr/pews/data/";
	var manual = "https://www.weather.go.kr/pews/man/m.html";
	var bhvrOn = false;

	function fn_parseY(loc) {
		return (38.9 - Number(loc)) * 138.4;
	}

	function fn_parseX(loc) {
		return (Number(loc) - 124.5) * 113;
	}

	document.addEventListener("DOMContentLoaded", function () {
		fn_tabInit();
		var params = [19];
		if (location.search != null && location.search != "" && location.search != "?")
			params = location.search.replace("?", "").split(",");
		fn_setLocation(params);
		clock = new Date().getTime() - tide + delay;
		document.getElementById('time').innerHTML = new Date(clock).format(dateFormat);
		pTime = new Date(new Date().getTime() - tide - tzMsec).format("yyyyMMddHHmmss");
		fn_getSta(binPath + pTime + ".s");
		fn_getMMI(binPath + pTime);
		fn_drawWave(tick, staList, phase);
		var sync = setInterval(function () {
			bSync = true;
		}, syncPeriod * 1000);
		var ticker = setInterval(function () {
			var date = new Date(new Date().getTime() - tide - tzMsec);
			var cTime = date.format("yyyyMMddHHmmss");
			var url = binPath + cTime;
			var val = document.getElementById('eta');
			var ct = new Date().getTime() - tide;
			if (cTime != pTime) {
				pTime = cTime;
				clock = new Date().getTime() - tide + delay;
				document.getElementById('time').innerHTML = new Date(clock).format(dateFormat);
				fn_getMMI(url);
				fn_show();
			}
			if (eqkTime != latestEqkTime) {
				eta = fn_timer(originLat, originLon, myLoc[curLocSel].lat, myLoc[curLocSel].lon) - Math.ceil((ct - Number(eqkTime) - tzMsec) / 1000);
				eqkTimeStr = new Date(eqkTime + tzMsec).format("yyyy년 MM월 dd일 HH시 mm분 ss초");
				eqkInfoStr = eqkStr + " 지진발생";
				document.getElementById('occur').innerHTML = new Date(eqkTime + tzMsec).format(dateFormat); // 헤더 발생시각
				document.getElementById('origin').innerHTML = eqkStr; // 헤더 지진정보
				document.getElementById('estScl').innerHTML = eqkMag.length == 1 ? eqkMag + ",0" : eqkMag; // 추정규모
				document.getElementById('estMag').innerHTML = mmi[eqkMax]; // 최대예상진도

				noticeDelay = Math.floor((date.getTime() - eqkTime) / 1000);
				tick = (noticeDelay * speed) / 0.7725;
				latestEqkTime = eqkTime;
				//fn_bhvr(true);
			}
			if (phase > 1) {
				// 지진 발생시 Notice 제어
				tick = (ct - eqkTime - tzMsec) * (speed / 772.5);
				eta = fn_timer(originLat, originLon, myLoc[curLocSel].lat, myLoc[curLocSel].lon) - Math.ceil((ct - Number(eqkTime) - tzMsec) / 1000);
				var orgReg = eqkStr.substr(-2) == "해역" ? 17 : ra.indexOf(eqkStr.substr(0, 2));
				fn_alarm(eqkStr.substr(-2) == "해역" ? 17 : ra.indexOf(eqkStr.substr(0, 2)));
				if (phase == 2) {
					// P2 Notice 제어
					if (eta >= 0) {
						document.getElementById('ntcMsg').innerHTML = "지진파 도달 남은시간";
						document.getElementById('eta').innerHTML = eta;
						document.getElementById('etaS').innerHTML = eta;
						document.getElementById('estDiv').style.visibility = "visible";
						document.getElementById('estDiv').style.position = "relative";
						document.getElementById('anaDiv').style.visibility = "hidden";
						document.getElementById('anaDiv').style.position = "absolute";
					} else {
						document.getElementById('ntcMsg').innerHTML = "상세지진 분석중";
						document.getElementById('etaS').innerHTML = "-";
						document.getElementById('estDiv').style.visibility = "hidden";
						document.getElementById('estDiv').style.position = "absolute";
						document.getElementById('anaDiv').style.visibility = "visible";
						document.getElementById('anaDiv').style.position = "relative";
					}
				} else {
					// P3 Notice 제어
					document.getElementById('maxMagBack').setAttribute("mag", eqkMax);
					var es = eqkStr.substr(0, eqkStr.lastIndexOf("쪽"));
					es = es.substr(0, es.lastIndexOf(" "));
					if (es.charAt(es.length - 1) == "도")
						es = es.substr(0, es.lastIndexOf(" "));
					eqkTimeStr = new Date(eqkTime + tzMsec).format("yyyy년 MM월 dd일 HH시 mm분 ss초");
					eqkInfoStr = eqkStr + " 지진발생";
					document.getElementById('eqkStr').innerHTML = es + " 규모 " + (eqkMag.length == 1 ? eqkMag + ",0" : eqkMag) + " " + eqkStr.substr(-2) + " 지진발생";
					document.getElementById('eqkOcr').innerHTML = eqkTimeStr;
					document.getElementById('eqkStrLoc').innerHTML = eqkStr;
					document.getElementById('eqkMag').innerHTML = eqkMag.length == 1 ? eqkMag + ",0" : eqkMag;
					document.getElementById('eqkDep').innerHTML = (eqkDep == 0) ? "-" : eqkDep + "㎞";
					document.getElementById('magVal').innerHTML = mmi[eqkMax];
					document.getElementById('maxArea').innerHTML = eqkMaxArea;
				}
			}
			fn_setPhase(phase);
			fn_drawWave(tick, staList, phase);
		}, 1000 / frameRate);
	});

	function fn_setPhase(phase) {
		var pDiv = document.getElementById('phase');
		switch (phase) {
			case 1:
				pDiv.classList.remove('noticeP2');
				pDiv.classList.remove('noticeP3');
				pDiv.classList.add('noticeP1');
				break;
			case 2:
				pDiv.classList.remove('noticeP1');
				pDiv.classList.remove('noticeP3');
				pDiv.classList.add('noticeP2');
				break;
			case 3:
				pDiv.classList.remove('noticeP1');
				pDiv.classList.remove('noticeP2');
				pDiv.classList.add('noticeP3');
				break;
			default:
				pDiv.classList.remove('noticeP2');
				pDiv.classList.remove('noticeP3');
				pDiv.classList.add('noticeP1');
		}
	}

	function fn_setDistance(y, x, arr) {
		for (var i = 0; i < arr.length; i++) {
			arr[i].dist = fn_distance(arr[i].lat, arr[i].lon, y, x);
		}
		return arr;
	}

	function fn_timer(orgLat, orgLon, destLat, destLon) {
		return Math.floor(Math.sqrt(Math.pow((orgLat - destLat) * 111, 2) + Math.pow((orgLon - destLon) * 88, 2)) / 3);
	}

	function fn_getHist(evtId) {
		var oReq = new XMLHttpRequest();

		oReq.overrideMimeType("application/json");
		oReq.open("POST", "/binary", true);
		oReq.timeout = 3000;

		oReq.onload = function (evt) {
			if (oReq.readyState == 4 && (oReq.status == 200 || oReq.status == 304)) {
				eqkHist = JSON.parse(oReq.responseText);
				console.log(eqkHist);
				fn_favChg();
			} else if (oReq.readyState == 4 && !(oReq.status == 200 || oReq.status == 304)) {
				fn_getHist(evtId);
			}
		}
		oReq.send((binPath + "list/" + evtId + ".h").replace("https://www.weather.go.kr", ""));
	}

	function fn_getMMI(url) {
		var oReq = new XMLHttpRequest();
		var sendTime = new Date().getTime(); // 요기

		oReq.open("POST", "/binary", true);
		oReq.timeout = 1000;

		oReq.onloadstart = function (evt) {
			oReq.responseType = "arraybuffer";
		};
		oReq.onreadystatechange = function (evt) {
			/*
			if(oReq.readyState == 4 && bSync && !sim){
				var receiveTime = new Date().getTime(); // 요기
				var sTime = sendTime.toString();
				var digit = syncPeriod.length -1;
				var dTime = oReq.getResponseHeader('ST').replace(".", "");
				var lDate = oReq.getResponseHeader('Last-Modified');
				if(tide == delay || receiveTime - sendTime < 100){ // 요기
					if(dTime != null){
						tide = new Date().getTime() - dTime + delay; // 요기
					}
					console.log(new Date(Number(dTime)));
					console.log(oReq.getResponseHeader('Last-Modified'));
					console.log("sendTime : " + sTime);
					console.log("Server time synchronized : " + new Date(oReq.getResponseHeader('Date')));
					console.log("Current time deviation : " + tide);
					bSync = false;
				} // 요기
			}
			*/
			if (oReq.readyState == 4 && oReq.status == 200) {
				var arrayBuffer = oReq.response;

				if (arrayBuffer) {
					var byteArray = new Uint8Array(arrayBuffer);
					// ==================================================================
					// ==================================================================
					// ==================================================================
					var header = "";
					var binaryStr = "";
					for (var i = 0; i < headerLen; i++) {
						header += fn_lpad(byteArray[i].toString(2), 8);
					}
					for (var i = headerLen; i < byteArray.byteLength; i++) {
						binaryStr += fn_lpad(byteArray[i].toString(2), 8);
					}
					var staF = header.substr(0, 1) == "1";
					if (header.substr(1, 1) == "0") {
						if (phase != 1) {
							gridArr = [];
							gridRenew = true;
						}
						phase = 1;
					} else if (header.substr(1, 1) == "1" && header.substr(2, 1) == "0") {
						if (phase != 2)
							gridRenew = true;
						phase = 2;
					} else if (header.substr(2, 1) == "1") {
						if (phase != 3)
							gridRenew = true;
						phase = 3;
					}
					if (!sim) {
						var newId = "20" + parseInt(header.substr(6, 26), 2);
						console.log(latEvtId + " : " + newId);
						if (latEvtId < newId) {
							latEvtId = newId;
							fn_getHist(newId);
							his = true;
						}
					}
					// ==================================================================
					// ==================================================================
					// ==================================================================
					var infoStrArr = [];
					for (var i = byteArray.byteLength - maxEqkStrLen; i < byteArray.byteLength; i++) {
						infoStrArr.push(byteArray[i]);
					}
					if (staF || staList.length < 99) {
						// sta 갱신
						fn_getSta(url + ".s", binaryStr);
					} else {
						fn_callback(binaryStr);
					}
					if (phase > 1) {
						// eqk 갱신
						fn_eqkHandler(binaryStr, infoStrArr);
					}
					if (phase > 1 && gridRenew) {
						gridRenew = false;
						setTimeout(fn_getGrid(binPath + eqkId + (phase == 2 ? ".e" : ".i")), 200);
					}
				}
			}
		}
		oReq.send(url.replace("https://www.weather.go.kr", "") + ".b");
	}

	function fn_getSta(url, data) {
		var binaryStr = "";
		var oReq = new XMLHttpRequest();

		oReq.open("POST", "/binary", true);
		oReq.timeout = 1000;

		oReq.onloadstart = function (evt) {
			oReq.responseType = "arraybuffer";
		};
		oReq.onreadystatechange = function (evt) {
			if (oReq.readyState == 4 && oReq.status == 200) {
				var arrayBuffer = oReq.response;

				if (arrayBuffer) {
					var byteArray = new Uint8Array(arrayBuffer);
					for (var i = 0; i < byteArray.byteLength; i++) {
						binaryStr += fn_lpad(byteArray[i].toString(2), 8);
					}
					fn_staBinHandler(binaryStr);
					fn_callback(data);
				}
			}
		}
		oReq.send(url.replace("https://www.weather.go.kr", ""));
	}

	function fn_getGrid(url) {
		var binaryStr = "";
		var oReq = new XMLHttpRequest();

		oReq.open("POST", "/binary", true);
		oReq.timeout = 1000;

		oReq.onloadstart = function (evt) {
			oReq.responseType = "arraybuffer";
		};
		oReq.onreadystatechange = function (evt) {
			var arrayBuffer = oReq.response;

			if (arrayBuffer && oReq.status == 200) {
				var byteArray = new Uint8Array(arrayBuffer);
				gridArr = [];
				for (var i = 0; i < byteArray.length; i++) {
					var gridStr = fn_lpad(byteArray[i].toString(2), 8);
					gridArr.push(parseInt(gridStr.substr(0, 4), 2));
					gridArr.push(parseInt(gridStr.substr(4, 4), 2));
				}
				gridRenew = false;
			} else {
				gridRenew = true;
			}
		}
		oReq.send(url.replace("https://www.weather.go.kr", ""));
	}

	function fn_callback(data) {
		var mmiObject = fn_mmiBinHandler(data);
		if (!mmiObject) return;
		for (var i = 0; i < staList.length; i++) {
			staList[i].mmi = mmiObject.mmiData[staList[i].idx];
		}
		fn_drawSta(staList);
	}

	function fn_renewSta() {
		fn_getSta(binPath + new Date(new Date().getTime() - tide - tzMsec).format("yyyyMMddHHmmss") + ".s");
	}

	function fn_eqkHandler(data, buffer) {
		data = data.substr(0 - ((maxEqkStrLen * 8 + maxEqkInfoLen)));
		originLat = 30 + (parseInt(data.substr(0, 10), 2) / 100);
		originLon = 124 + (parseInt(data.substr(10, 10), 2) / 100);
		originY = fn_parseY(originLat);
		originX = fn_parseX(originLon);
		eqkMag = parseInt(data.substr(20, 7), 2) / 10;
		eqkDep = parseInt(data.substr(27, 10), 2) / 10;
		eqkTime = Number(parseInt(data.substr(37, 32), 2) + "000");
		eqkId = "20" + parseInt(data.substr(69, 26), 2);
		eqkMax = parseInt(data.substr(95, 4), 2);
		var eqkMaxAreaStr = data.substr(99, 17);
		eqkMaxArea = [];
		if (eqkMaxAreaStr != "11111111111111111") {
			for (var i = 0; i < 17; i++) {
				if (eqkMaxAreaStr.charAt(i) == "1")
					eqkMaxArea.push(ra[i]);
			}
		} else {
			eqkMaxArea.push("-");
		}
		eqkStr = decodeURIComponent(escape(String.fromCharCode.apply(null, buffer))).trim();
		console.log("위도 : " + originLat + ", 경도 : " + originLon + ", 규모 : " + eqkMag + ", 깊이 : " + eqkDep + ", 발생 시각 : " + eqkTime + ", ID : " + eqkId + ", 문구 : " + eqkStr + ", 최대진도 : " + eqkMax + ", 최대진도 지역 : " + eqkMaxArea);
	}

	function fn_setLocation(rArr) {
		myLoc = [];
		for (var i = 0; i < rArr.length; i++) {
			myLoc.push(new Object());
			myLoc[i].idx = rArr[i];
			myLoc[i].lat = da[rArr[i]].split(",")[2];
			myLoc[i].lon = da[rArr[i]].split(",")[3];
			myLoc[i].X = fn_parseX(myLoc[i].lon);
			myLoc[i].Y = fn_parseY(myLoc[i].lat);
			myLoc[i].rn = da[rArr[i]].split(",")[0];
			myLoc[i].sn = da[rArr[i]].split(",")[1];
			myLoc[i].rc = ca[rArr[i]];
		}
		var nRc = myLoc[0].idx;
		var selObj = document.getElementById('fav');
		if (selObj.options.length != 0)
			nRc = selObj.options[curLocSel].value;
		fn_setBm(nRc);
	}

	function fn_setBm(nRc) {
		var selObj = document.getElementById('fav');
		var selVal = selObj.options.length == 0 ? myLoc[0].idx : nRc;

		selObj.length = 0;
		for (var i = 0; i < myLoc.length; i++) {
			var op = new Option();
			op.value = myLoc[i].idx;
			op.text = myLoc[i].rn + " " + myLoc[i].sn;
			selObj.add(op);
		}
		for (var i = 0; i < myLoc.length; i++) {
			if (selObj.options[i].value == selVal)
				selObj.options[i].selected = true;
		}
		fn_favChg();
	}

	function fn_favChg() {
		if (eqkHist != null) {
			curLocSel = document.getElementById('fav').selectedIndex;
			var rIdx = ra.indexOf(myLoc[curLocSel].rn);
			var hist = "";
			for (var i = 0; i < eqkHist[rIdx].length; i++) {
				hist += "<tr><td>" + eqkHist[rIdx][i].date + "</td><td>" + eqkHist[rIdx][i].mag + "</td><td>" + eqkHist[rIdx][i].info + "</td></tr>";
			}
			if (hist == "")
				hist += "<tr>과거 지진 기록 없음</tr>";
			document.getElementById('histList').innerHTML = hist;
			document.getElementById('histLoc').innerHTML = myLoc[curLocSel].rn;
			//document.getElementById('sd').innerHTML = myLoc[curLocSel].rn;
			//document.getElementById('sgg').innerHTML = myLoc[curLocSel].sn;
			document.getElementById('sd').innerHTML = myLoc[curLocSel].rn + " " + myLoc[curLocSel].sn + "<span>예상진도</span>";
		}
	}

	function fn_drawSta(sta) {
		var img = document.getElementById('img');
		var canS = document.getElementById('canS');
		var ctxS = canS.getContext('2d');
		var canB = document.getElementById('canB');
		var ctxB = canB.getContext('2d');
		canS.width = canB.width = img.width - 1;
		canS.height = canB.height = img.height - 1;

		ctxS.save();
		ctxB.save();
		ctxB.scale(canB.width / imgW, canB.width / imgW);
		ctxS.scale(canS.width / imgW, canS.width / imgW);

		ctxS.strokeStyle = "#000000";
		var cnt = 0;
		var myMag = 1;
		if (phase > 1 && gridArr.length > 0) {
			for (var i = 38.85; i > 33; i -= 0.05) {
				for (var j = 124.5; j < 132.05; j += 0.05) {
					ctxB.fillStyle = mmiColor[Number(gridArr[cnt])];
					ctxB.fillRect(fn_parseX(j) - 4, fn_parseY(i) - 7, 8, 8);
					if (Math.abs(myLoc[curLocSel].lat - i) < 0.025 && Math.abs(myLoc[curLocSel].lon - j) < 0.025) {
						myMag = gridArr[cnt];
						document.getElementById('myMag').innerHTML = mmi[myMag];
						document.getElementById('magBack').setAttribute("mag", myMag);
						document.getElementById('magInfo').innerHTML = mag[myMag];
					}
					cnt++;
				}
			}
		} else {
			ctxB.clearRect(0, 0, canB.width, canB.height);
			myMag = 1;
		}

		for (var i = 0; i < sta.length; i++) {
			ctxS.fillStyle = mmiColor[sta[i].mmi];
			ctxS.fillRect(fn_parseX(sta[i].lon) - 4, fn_parseY(sta[i].lat) - 4, 10, 10);
			ctxS.strokeRect(fn_parseX(sta[i].lon) - 4, fn_parseY(sta[i].lat) - 4, 10, 10);
		}

		fn_setBhvr(myMag);

		ctxB.restore();
		ctxB.restore();
		ctxS.restore();
		ctxS.restore();
	}

	function fn_show() {
		if (show) {
			show = false;
			showOrg = true;
			setTimeout(function () {
				showOrg = false;
				setTimeout(function () {
					showOrg = true;
					setTimeout(function () {
						showOrg = false;
						setTimeout(function () {
							showOrg = true;
							setTimeout(function () {
								showOrg = false;
							}, 500);
						}, 500);
					}, 500);
				}, 500);
			}, 500);
		}
	}

	function fn_drawWave(tick, sta, phase) {
		var img = document.getElementById('img');
		var body = document.getElementById('body');
		var canW = document.getElementById('canW');
		var ctxW = canW.getContext('2d');
		canW.width = img.width - 1;
		canW.height = img.height - 1;

		var org = new Image();
		var dest = new Image();
		org.src = "https://www.weather.go.kr/pews/img/ico_org4.png";
		dest.src = "https://www.weather.go.kr/pews/img/ico_loc0.png";

		ctxW.save();
		ctxW.scale(img.width / imgW, img.width / imgW);

		if (phase > 1) {
			ctxW.lineWidth = 5;
			// p파
			ctxW.strokeStyle = "#0000FF";
			ctxW.fillStyle = "#FFFFFF";
			ctxW.beginPath();
			ctxW.arc(originX, originY, tick * 2, 0, Math.PI * 2, true);
			ctxW.stroke();
			ctxW.fillStyle = "#0000FF";
			ctxW.font = '36px sans-serif';
			ctxW.fillText("P", originX - 10, originY - 3 - (tick * 2));
			ctxW.textAlign = "center";

			// s파
			ctxW.strokeStyle = "#FF0000";
			ctxW.fillStyle = "#FFFFFF";
			ctxW.beginPath();
			ctxW.arc(originX, originY, tick, 0, Math.PI * 2, true);
			ctxW.stroke();
			ctxW.fillStyle = "#FF0000";
			ctxW.fillText("S", originX, originY - 3 - tick);
			ctxW.textAlign = "center";
			if (showMyLoc) {
				// 진행방향
				ctxW.strokeStyle = "#FF0000";
				ctxW.setLineDash([10, 10]);
				ctxW.beginPath();
				ctxW.moveTo(originX, originY);
				ctxW.lineTo(myLoc[curLocSel].X, myLoc[curLocSel].Y);
				ctxW.stroke();
				ctxW.drawImage(org, originX - 15, originY - 15, 29, 29);
				ctxW.drawImage(org, originX - 15, originY - 15, 29, 29);
			}
		} else {
			ctxW.clearRect(0, 0, canW.width, canW.height);
		}
		if (showOrg) {
			ctxW.drawImage(org, simX - 15, simY - 15, 29, 29);
		}
		if (showMyLoc)
			ctxW.drawImage(dest, myLoc[curLocSel].X - 19, myLoc[curLocSel].Y - 45, 39, 53);
		ctxW.restore();
		ctxW.restore();
	}

	function fn_clearWave() {
		var canW = document.getElementById('canW');
		var ctxW = canW.getContext('2d');
		ctxW.clearRect(0, 0, canW.width, canW.height);
	}

	function fn_distance(originA, originB, destA, destB) {
		return Math.sqrt((Math.pow(Number(originA) - Number(destA), 2) + Math.pow(Number(originB) - Number(destB), 2)));
	}

	Date.prototype.format = function (f) {
		if (!this.valueOf()) return " ";

		var weekName = ["일요일", "월요일", "화요일", "수요일", "목요일", "금요일", "토요일"];
		var d = this;

		return f.replace(/(yyyy|yy|MM|dd|E|hh|mm|ss|a\/p)/gi, function ($1) {
			switch ($1) {
				case "yyyy": return d.getFullYear();
				case "yy": return (d.getFullYear() % 1000).zf(2);
				case "MM": return (d.getMonth() + 1).zf(2);
				case "dd": return d.getDate().zf(2);
				case "E": return weekName[d.getDay()];
				case "HH": return d.getHours().zf(2);
				case "hh": return ((h = d.getHours() % 12) ? h : 12).zf(2);
				case "mm": return d.getMinutes().zf(2);
				case "ss": return d.getSeconds().zf(2);
				case "a/p": return d.getHours() < 12 ? "오전" : "오후";
				default: return $1;
			}
		});
	};

	String.prototype.string = function (len) { var s = '', i = 0; while (i++ < len) { s += this; } return s; };
	String.prototype.zf = function (len) { return "0".string(len - this.length) + this; };
	Number.prototype.zf = function (len) { return this.toString().zf(len); };

	function fn_lpad(str, len) {
		while (str.length < len) {
			str = "0" + str;
		}
		return str;
	}

	function fn_mmiBinHandler(binaryData) {
		if (!binaryData || binaryData.length == 0)
			return null;
		var mmiObj = new Object();
		mmiObj.mmiData = [];
		for (var i = 0; i < binaryData.length; i += 4) {
			mmiObj.mmiData.push(parseInt(binaryData.substr(i, 4), 2));
		}
		return mmiObj;
	}

	function fn_alarm(rIdx) {
		if (alarmReg.indexOf(rIdx) != -1) {
			var alarm = document.getElementById('alarmWav');
			alarm.play();
		}
	}

	function fn_setAlarm() {
		var alarmBtn = document.getElementById('alarmBtn');
		if (alarmBtn.src.indexOf("on") != -1) {
			alarmReg = [];
			alarmBtn.src = "https://www.weather.go.kr/pews/img/sound_off.png";
		} else {
			alarmReg = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17];
			alarmBtn.src = "https://www.weather.go.kr/pews/img/sound_on.png";
		}
	}

	function fn_staBinHandler(binaryData) {
		var newStaList = [];
		var staLatArr = [];
		var staLonArr = [];
		for (var i = 0; i < binaryData.length; i += 20) {
			staLatArr.push(30 + (parseInt(binaryData.substr(i, 10), 2) / 100));
			staLonArr.push(120 + (parseInt(binaryData.substr(i + 10, 10), 2) / 100));
		}

		for (var i = 0; i < staLatArr.length; i++) {
			var staInfo = new Object();
			staInfo.lat = staLatArr[i];
			staInfo.lon = staLonArr[i];
			staInfo.idx = i;
			newStaList.push(staInfo);
		}
		if (newStaList.length > 99)
			staList = newStaList;
	}

	function fn_man(flag) {
		if (flag) {
			window.open(manual, "사용자 메뉴얼", "width=770, height=800, scrollbars=1");
		} else {
			window.open("https://www.weather.go.kr/pews/man/m1.html", "지진 발생시 행동요령", "width=830, height=800, scrollbars=1");
		}
	}


	// 행동요령탭

	function fn_tabInit() {
		var tabConts = document.getElementsByName('tabConts');
		var tabContP = document.getElementsByName('tabContP');
		var tabContD = document.getElementsByName('tabContD');
		for (var i = 0; i < tabContP.length; i++) {
			tabContP[i].style.display = "none";
		}
		for (var i = 0; i < tabContD.length; i++) {
			tabContD[i].style.display = "none";
		}
		for (var i = 0; i < tabConts.length; i++) {
			tabConts[i].childNodes[1].style.display = "flex";
		}
	}

	function fn_setBhvr(magN) {
		//console.log("fn_setBhvr : " + magN);
		document.getElementById('bhvrMagImg').src = "img/m" + magN + ".png";
		document.getElementById('bhvrMag').setAttribute("mag", magN);
		document.getElementById('bhvrMag').innerHTML = mmi[magN];
		//document.getElementById('bhvrMagNoti').style.visibility = magN > 1 ? "visible" : "hidden";
		document.getElementById('bhvrMagInfo').innerHTML = mag[magN].substr(7);
	}

	function fn_pla(idx) {
		var plaBtn = document.getElementsByName('plaBtn');
		for (var i = 0; i < plaBtn.length; i++) {
			plaBtn[i].classList.remove('on');
		}
		plaBtn[idx - 1].classList.add('on');
		var tabContP = document.getElementsByName('tabContP');
		for (var i = 0; i < tabContP.length; i++) {
			tabContP[i].style.display = "none";
		}
		document.getElementById('place' + idx).style.display = "flex";
	}

	function fn_dis(idx) {
		var disBtn = document.getElementsByName('disBtn');
		for (var i = 0; i < disBtn.length; i++) {
			disBtn[i].classList.remove('on');
		}
		disBtn[idx - 1].classList.add('on');
		var tabContD = document.getElementsByName('tabContD');
		for (var i = 0; i < tabContD.length; i++) {
			tabContD[i].style.display = "none";
		}
		document.getElementById('dis' + idx).style.display = "flex";
	}

	function fn_bhvr(flag) {
		if (flag) {
			document.getElementById('bhvr').style.visibility = "visible";
			document.getElementById('t_view').style.top = "0";
		} else {
			document.getElementById('bhvr').style.visibility = "hidden";
			document.getElementById('t_view').style.top = "-150px";
		}
		bhvrOn = flag;
	}
</script>

<body>
	<form id="geo" onreset="fn_alert">
	</form>
	<div class="phase_wrap noticeP1" id="phase">
		<div class="header">
			<div id="title" class="tit">
				<h1 class="simul">사용자 맞춤형 지진정보서비스</h1>
			</div>
			<div id="phase_set" class="phase_set">
				<div class="m_tit">
					<h1>기상청</h1>
				</div>
				<div id="time" class="time">2019.12.30. 00:00:00</div>
				<div class="loc">
					<label for="fav">기준지점</label>
					<select name="fav" id="fav" onchange="fn_favChg()">
					</select>
				</div>
				<div class="nav">
					<a href="#" onclick="fn_man(1)" class="btn_nav">네비게이션</a>
					<button type="button" onclick="fn_setAlarm()" class="btn_alm">
						<img src="https://www.weather.go.kr/pews/img/sound_on.png" id="alarmBtn" alt="알람설정" />
					</button>
				</div>
			</div>
		</div>
		<div id="body" class="body" style="overflow:hidden;">
			<div class="map_area">
				<canvas id="canB" width="847" height="100%"
					style="left:0;position:absolute;background:lightgrey;z-index:1;"></canvas>
				<img id="img" src="https://www.weather.go.kr/pews/img/map.png" width="100%" height="auto"
					style="position:absolute;z-index:2;" alt="임시지도이미지">
				<canvas id="canS" width="100%" height="100%" style="left:0;position:absolute;z-index:3;"></canvas>
				<canvas id="canW" width="100%" height="100%" style="left:0;position:absolute;z-index:4;"></canvas>
				<div class="legend_mag">
					<table class="tbl_legend">
						<caption>진도범례</caption>
						<tr>
							<th scope="col">PGA(%g)</th>
							<th scope="col">MMI</th>
						</tr>
						<tr>
							<td>146.14 ≤</td>
							<td mag="10">Ⅹ&plus;</td>
						</tr>
						<tr>
							<td>68.01 ≤</td>
							<td mag="9">Ⅸ</td>
						</tr>
						<tr>
							<td>31.66 ≤</td>
							<td mag="8">Ⅷ</td>
						</tr>
						<tr>
							<td>14.73 ≤</td>
							<td mag="7">Ⅶ</td>
						</tr>
						<tr>
							<td>6.86 ≤</td>
							<td mag="6">Ⅵ</td>
						</tr>
						<tr>
							<td>2.56 ≤</td>
							<td mag="5">Ⅴ</td>
						</tr>
						<tr>
							<td>0.76 ≤</td>
							<td mag="4">Ⅳ</td>
						</tr>
						<tr>
							<td>0.23 ≤</td>
							<td mag="3">Ⅲ</td>
						</tr>
						<tr>
							<td>0.07 ≤</td>
							<td mag="2">Ⅱ</td>
						</tr>
						<tr>
							<td></td>
							<td mag="1">Ⅰ</td>
						</tr>
					</table>
				</div>
				<!-- 행동요령 -->
				<div id="bhvr" class="layer_pop pop_behavior" style="visibility:hidden">
					<h1 class="blind">행동요령</h1>
					<button type="button" class="btn_close" onclick="fn_bhvr(false)">닫기</button>
					<div class="pop_body">
						<div class="section flex_wrap">
							<div class="mag_figure">
								<img id="bhvrMagImg" src="img/m1.png" alt="">
								<i id="bhvrMag" mag="1">Ⅰ</i>
							</div>
							<div class="txt">
								<p id="bhvrMagNoti" class="alert lefer excl">안전한 장소로 대피하세요!</p>
								<p id="bhvrMagInfo" class="mag_infoTxt">대부분 사람들은 느낄 수 없으나, 지진계에는 기록</p>
								<ul class="mag flex_wrap">
									<li mag="1">Ⅰ</li>
									<li mag="2">Ⅱ</li>
									<li mag="3">Ⅲ</li>
									<li mag="4">Ⅳ</li>
									<li mag="5">Ⅴ</li>
									<li mag="6">Ⅵ</li>
									<li mag="7">Ⅶ</li>
									<li mag="8">Ⅷ</li>
									<li mag="9">Ⅸ</li>
									<li mag="10">Ⅹ&plus;</li>
								</ul>
								<div class="mag_infoImg">
									<h2>흔들림&sol;피해</h2>
									<ul>
										<li>없음</li>
										<li>다소있음</li>
										<li>심함</li>
										<li>매우심함</li>
									</ul>
								</div>
							</div>
						</div>
					</div>
					<div class="tab_wrap behavior">
						<div class="tab_item place">
							<div class="tit">
								<h1>장소별 행동요령</h1>
							</div>
							<div class="tab_cont">
								<ul class="li_behavior" name="tabList">
									<li id="plaBtn1" name="plaBtn" class="on"><a href="#" onclick="fn_pla(1)">집안</a>
									</li>
									<li id="plaBtn2" name="plaBtn"><a href="#" onclick="fn_pla(2)">집밖</a></li>
									<li id="plaBtn3" name="plaBtn"><a href="#" onclick="fn_pla(3)">고층건물</a></li>
									<li id="plaBtn5" name="plaBtn"><a href="#" onclick="fn_pla(4)">엘리베이터</a></li>
									<li id="plaBtn4" name="plaBtn"><a href="#" onclick="fn_pla(5)">학교</a></li>
									<li id="plaBtn10" name="plaBtn"><a href="#" onclick="fn_pla(6)">백화점·마트</a></li>
									<li id="plaBtn9" name="plaBtn"><a href="#" onclick="fn_pla(7)">극장·경기장</a></li>
									<li id="plaBtn8" name="plaBtn"><a href="#" onclick="fn_pla(8)">운전중</a></li>
									<li id="plaBtn7" name="plaBtn"><a href="#" onclick="fn_pla(9)">전철안</a></li>
									<li id="plaBtn6" name="plaBtn"><a href="#" onclick="fn_pla(10)">산·바다</a></li>
								</ul>
								<div class="knowhows" name="tabConts">
									<div id="place1" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place1.png" alt="">
										</div>
										<div class="txt">
											<h2>집안에 있을 경우</h2>
											<p><em>탁자 아래로</em> 들어가 몸을 보호하고 흔들림이 멈추면 <em>전기와 가스를 차단하고</em> 문을 열어 <em>출구를
													확보</em>한 후, 밖으로 나갑니다.</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place2" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place2.png" alt="">
										</div>
										<div class="txt">
											<h2>집밖에 있을 경우</h2>
											<!--<p>떨어지는 물건에 대비하여 가방이나 손으로 <em>머리를 보호하며, 건물과 거리를 두고</em> 운동장이나 공원 등 <em>넓은 공간</em>으로 대피합니다.</p>-->
											<p>떨어지는 유리, 간판, 담장, 전봇대에 주의하며, <em>소지품으로 몸을 보호</em>하고, <em>건물과 거리를 두고 운동장이나
													공원 등 넓은 공간으로 대피</em>합니다.</p>
											<p class="ps">최근에 지은 튼튼한 건물안도 대피가능</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place3" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place3.png" alt="">
										</div>
										<div class="txt">
											<h2>고층건물에 있을 경우</h2>
											<!--<p>높은 층의 건물일수록 흔들림이 크고 오래 지속 될 수 있으므로 <em>실내에서 떨어지는 물건에 더욱 주의</em>해야 합니다.</p>-->
											<p>높은 층의 건물일수록 흔들림이 크고 오래 지속 될 수 있으므로 <em>실내에서 떨어지는 물건에 더욱 주의</em>해야 합니다.
											</p>
											</p>
											<p class="ps">고층건물은 일반적으로 지진에 잘 견디도록 내진설계를 통해 내진성능확보함</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place4" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place5.png" alt="">
										</div>
										<div class="txt">
											<h2>엘리베이터에 있을 경우</h2>
											<p><em>모든 층의 버튼</em>을 눌러 가장 먼저 열리는 층에서 내린 후 계단을 이용해 대피합니다.</p>
											<p class="ps">지진 발생 시 <em>엘리베이터를 타면 안됩니다.</em></p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place5" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place4.png" alt="">
										</div>
										<div class="txt">
											<h2>학교에 있을 경우</h2>
											<!--<p><em>책상 아래</em>로 들어가 <em>책상다리를 꼭 잡습니다.</em> 흔들림이 멈추면 질서를 지키며 운동장으로 대피합니다.</p>-->
											<p><em>책상아래</em>로 들어가 <em>책상다리를 꼭 잡고 몸을 보호</em>합니다. 흔들림이 멈추면 선생님의 안내에 따라 질서를
												지키며 창문과 떨어져 운동장으로 대피합니다.</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place6" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place10.png" alt="">
										</div>
										<div class="txt">
											<h2>백화점·마트에 있을 경우</h2>
											<!--<p><em>진열장에서 떨어지는 물건</em>으로 부터 <em>몸을 보호</em>하고, <em>계단이나 기둥 근처</em>로 가 있습니다. 흔들림이 멈추면 밖으로 대피합니다.</p>-->
											<p><em>진열장에서 떨어지는 물건</em>으로부터 <em>몸을 보호</em>합니다. <em>계단이나 기둥근처</em>로 피해있다가,
												흔들림이 멈추면 안내에 따라 침착하게 대피합니다.</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place7" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place9.png" alt="">
										</div>
										<div class="txt">
											<h2>극장·경기장에 있을 경우</h2>
											<p>흔들림이 멈출때까지 <em>가방</em>등 소지품으로 <em>몸을 보호</em>하면서 자리에 있다가, <em>안내에 따라</em>
												침착하게 대피합니다.</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place8" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place8.png" alt="">
										</div>
										<div class="txt">
											<h2>운전을 하고 있을 경우</h2>
											<!--<p>비상등을 켜고 서서히 속도를 줄여 <em>도로 오른쪽</em>에 차를 세우고, 라디오의 정보를 잘 들으면서 <em>키를 꽂아 두고</em> 대피합니다.</p>-->
											<p>비상등을 켜고 서서히 속도를 줄여 <em>교량, 고가도로를 피해 도로 오른쪽</em>에 차를 세웁니다. 라디오의 정보를 잘 듣고,
												대피해야할 때에는 <em>열쇠를 꽂고</em> 문을 잠그지 않고 대피합니다.</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place9" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place7.png" alt="">
										</div>
										<div class="txt">
											<h2>전철을 타고 있을 경우</h2>
											<p><em>손잡이나 기둥을 잡아</em> 넘어지지 않도록 합니다. 전철이 멈추면 <em>안내에 따라</em> 행동합니다.</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
									<div id="place10" class="knowhow" name="tabContP">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/place6.png" alt="">
										</div>
										<div class="txt">
											<h2>산·바다에 있을 경우</h2>
											<!--<p><em>산사태, 절벽 붕괴에 주의</em>하고 <em>안전한 곳</em>으로 대피합니다. 해안에서 <em>지진해일 특보</em>가 발령되면 <em>높은 곳</em>으로 이동합니다.</p>-->
											<p><em>산사태, 절벽 붕괴에 주의</em>하며 급한 경사지를 피해 <em>평탄한곳</em>으로 대피합니다. 해안에서
												<em>지진해일특보가</em> 발령되면 <em>높은곳</em>으로 이동합니다.</p>
											<p class="ps">지진해일 긴급대피장소, 3층이상의 튼튼한 걸물 등으로 대피</p>
											<div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- tab_item__e -->
						<div class="tab_item disability">
							<div class="tit">
								<h1>몸이 불편하신 분 행동요령</h1>
							</div>
							<div class="tab_cont">
								<ul class="li_behavior">
									<li id="disBtn1" name="disBtn" class="on"><a href="#" onclick="fn_dis(1)">시각장애</a>
									</li>
									<li id="disBtn2" name="disBtn"><a href="#" onclick="fn_dis(2)">지체장애</a></li>
									<li id="disBtn3" name="disBtn"><a href="#" onclick="fn_dis(3)">청각장애</a></li>
									<li id="disBtn4" name="disBtn"><a href="#" onclick="fn_dis(4)">발달장애</a></li>
								</ul>
								<div class="knowhows" name="tabConts">
									<div id="dis1" class="knowhow" name="tabContD">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/dis1.png" alt="">
										</div>
										<div class="txt">
											<h2>시력이 좋지 않거나 시각장애가 있는 경우</h2>
											<!--<p>우선 미디어 매채로 상황파악을 한 뒤 장애물을 점검하며 천천히 움직이고 <em>주위 사람에게 도움</em>을 적극적으로 요청합니다.</p>-->
											<p><em>머리와 몸을 보호</em>하고, 흔들림이 멈추면 라디오, 텔레비전 등 미디어 매체로 상황파악을 합니다. 장애물을 점검하며
												천천히 움직이고, <em>주위사람들에게 도움을 적극적으로 요청</em>합니다.</p>
											<!-- <div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div> -->
										</div>
									</div>
									<div id="dis2" class="knowhow" name="tabContD">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/dis2.png" alt="">
										</div>
										<div class="txt">
											<h2>거동이 불편하거나 지체장애가 있는 경우</h2>
											<!--<p>혼자서 행동하지 말고 <em>이웃과 함께 대피</em>합니다. 휠체어나 보행기를 사용할 경우 바퀴를 잠그고 몸을 숙여 책·방석·배게 등으로 <em>머리와 목을 보호</em>합니다.</p>-->
											<p>휠체어, 보행기를 사용할 경우 바퀴를 잠그고 <em>몸을 앞으로 숙여 책·방석·배게 등으로 머리와 목을 보호</em>합니다. 대피할
												때에는 혼자서 행동하지 말고 이웃과 함께 대피하고, 움직일 수 없을때에는 조금이라도 안전한 장소에서 도움을 기다립니다.</p>
											<!-- <div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div> -->
										</div>
									</div>
									<div id="dis3" class="knowhow" name="tabContD">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/dis3.png" alt="">
										</div>
										<div class="txt">
											<h2>청력이 좋지 않거나 청각장애가 있는 경우</h2>
											<!--<p>TV의 자막방송 및 휴대전화 등으로 <em>정보를 수집</em>하고, 움직이기 힘든 경우 <em>호루라기 등으로 소리</em>를 내어 장소를 알리고 도움을 받습니다.</p>-->
											<p>머리와 몸을 보호하고, 흔들림이 멈추면 <em>텔레비전의 자막방송 및 휴대전화 등으로 정보를 수집</em>합니다. 움직이기 힘든
												경우 <em>호루라기 등으로 소리</em>를 내어 장소를 알리고 도움을 받습니다.</p>
											<!-- <div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div> -->
										</div>
									</div>
									<div id="dis4" class="knowhow" name="tabContD">
										<div class="figure">
											<img src="https://www.weather.go.kr/pews/img/dis4.png" alt="">
										</div>
										<div class="txt">
											<h2>정신이 불안정하거나 발달장애가 있는 경우</h2>
											<!--<p><em>급히 서두르지 않고 침착하게</em> 주변 사람들과 미리 정한 대로 행동합니다. 혼란스러워 스스로 결정하지 못할 때에는 <em>주위사람에게 도움을 요청</em>합니다.</p>-->
											<p><em>급히 뛰거나 서두르지 않고</em>, 주변 사람들과 미리 정한 대로 행동합니다. 혼란스러워 스스로 결정하지 못할 때에는
												<em>주위사람에게 도움을 요청</em>합니다.</p>
											<!-- <div class="link_wrap"><a href="man/img/bhvr.pdf">자세한 행동요령 보기</a></div> -->
										</div>
									</div>
								</div>
							</div>
						</div>
						<!-- tab_item__e -->
					</div>
				</div>
				<!-- 행동요령__e -->
			</div>
			<!-- P1 -->
			<div id="noticeP1" class="notice">
				<div class="notice_tit">
					<button type="button" name="bhvrBtn" class="btn_speaker" onclick="fn_bhvr(true)">행동요령</button>
					<h1>현재 발생지진 없음</h1>
				</div>
				<div class="notice_body">
					<div class="est_loc">
						<span id="estLoc"><b id="histLoc" class="loc_tag">서울</b>지진발생목록</span>
					</div>
					<div class="quake_list">
						<table class="tbl_pastQuake">
							<thead>
								<tr>
									<th scope="col">발생일</th>
									<th scope="col">규모</th>
									<th scope="col">발생위치</th>
								</tr>
							</thead>
							<tbody id="histList">

							</tbody>
						</table>
					</div>
					<p class="lefer excl">주변환경의 영향 또는 일시적인 장비 이상으로 계기관측값이 크게 표출될 수 있습니다.</p>
				</div>
			</div>
			<!-- P2 -->
			<div id="noticeP2" class="notice phase2">
				<div class="notice_tit">
					<!-- 행동요령팝업이 열렸을 시 show -->
					<dl id="t_view" class="pop_alertTime t_view" style="top:-150px">
						<dt>지진파 도달</dt>
						<dd><em id="etaS">40</em>초</dd>
					</dl>
					<!-- 행동요령팝업 열렸을 시 show__e -->
					<button type="button" class="btn_speaker" onclick="fn_bhvr(true)">지진발생</button>
					<h1>
						<span id="occur" class="evt_time"></span>
						<span id="origin"></span>
					</h1>
					<dl class="est_mag">
						<dt>추정규모</dt>
						<dd><b id="estScl" class="val">1</b>M<sm>L</sm>
						</dd>
						<dt>최대예상진도</dt>
						<!--<dd><b id="estMag" class="val" style="font-family:'Noto Serif KR', serif;">Ⅰ</b></dd>-->
						<dd><b id="estMag" class="val">Ⅰ</b></dd>
					</dl>
				</div>
				<!--<div class="notice_tit">
					<button type="button" class="btn_speaker" onclick="fn_man()"></button>
					<h1>
						<span id="occur" class="evt_time"></span>
						<span id="origin"></span>
					</h1>
					<dl class="est_mag">
						<dt>추정규모</dt>
						<dd><b id="estScl" class="val">1</b>M<sm>L</sm></dd>
						<dt>최대예상진도</dt>
						<dd><b id="estMag" class="val">Ⅰ</b></dd>
					</dl>
				</div>-->
				<div class="notice_body">
					<div class="loc_mag">
						<div class="fl">
							<div class="ani_wrap" onclick="fn_bhvr(true)">
								<ul class="ani_item">
									<li>1. 지진발생을 주변에 알리고</li>
									<li>2. 머리와 몸을 감싸고</li>
									<li>3. 지진발생을 주변에 알리고</li>
								</ul>
								<button type="button" class="btn_aniDtl">자세히보기 </button>
							</div>
						</div>
						<div class="fr">
							<div id="magBack" class="loc_info loc_est_mag" mag="1">
								<span id="sd" class="label">경남 창원군 마산회원구<span>예상진도</span></span>
								<!--<p><b id="myMag" class="val" style="font-family:'Noto Serif KR', serif;">Ⅳ</b></p>-->
								<p><b id="myMag" class="val">Ⅳ</b></p>
							</div>
							<div class="loc_info loc_est_time">
								<span id="ntcMsg" class="label"></span>
								<p id="estDiv">
									<b id="eta" class="val"></b>초
								</p>
								<div id="anaDiv" class="lds-css ng-scope loading_wrap">
									<div class="lds-spinner">
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
										<div></div>
									</div>
								</div>
							</div>
							<div class="mag_info">
								<p class="tip">시간적 여유가 있으실 경우에는 안전한 장소로 대피 하세요!</p>
								<p id="magInfo"></p>
								<p class="lefer excl">상기 P파(6km/s), S파(3km/s)의 속도는 이론적인 값으로 실제와 다를 수 있음</p>
							</div>
						</div>
					</div>
				</div>
				<!--<div class="notice_body">                        
					<div class="loc_mag">
						<div class="fl loc_icon">
							<div class="loc_mark">
								<div class="mark layout">
									<p id="sd" class="loc_1deps">서울</p>
									<p id="sgg" class="loc_2deps">동작구</p>
								</div>
							</div>
						</div>
						<div class="fr">
							<div id="magBack" class="loc_info loc_est_mag" mag="1">
								<span class="label">내위치 예상진도</span>
								<p><b id="myMag" class="val">Ⅰ</b></p>
							</div>
							<div class="loc_info loc_est_time">
								<span id="ntcMsg" class="label"></span>
								<p id="estDiv">
									<b id="eta" class="val"></b>초
								</p>
								<div id="anaDiv" class="lds-css ng-scope loading_wrap">
									<div class="lds-spinner">
										<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>
									</div>
								</div>
							</div>
							<div class="mag_info">
								<p id="magInfo"></p>
								<p class="lefer excl">상기 P파(6km/s), S파(3km/s)의 속도는 이론적인 값으로 실제와 다를 수  있음</p>
							</div>
						</div>
					</div>
				</div>-->
			</div>
			<!-- P3 -->
			<div id="noticeP3" class="notice">
				<div class="notice_tit">
					<button type="button" name="bhvrBtn" class="btn_speaker" onclick="fn_bhvr(true)">행동요령</button>
					<h1 id="eqkStr" class="t_red"></h1>
				</div>
				<div class="notice_body">
					<dl class="quake_info">
						<dt>발생시각</dt>
						<dd id="eqkOcr"></dd>
						<dt>발생위치</dt>
						<dd id="eqkStrLoc"></dd>
						<dt>규모&sol;깊이</dt>
						<dd><span id="eqkMag">1</span>M<small>L</small> &sol; <span id="eqkDep">-</span></dd>
					</dl>
					<div id="maxMagBack" class="max_mag" mag="1">
						<p class="mag_wrap">
							<span class="label">최대진도</span>
							<span id="magVal">Ⅰ</span>
						<p id="maxArea">-</p>
					</div>
				</div>
			</div>
			<audio id="alarmWav" style="display:hidden">
				<source src="https://www.weather.go.kr/pews/wav/alert.wav" type="audio/wav">
			</audio>
		</div>
	</div>
</body>

</html>